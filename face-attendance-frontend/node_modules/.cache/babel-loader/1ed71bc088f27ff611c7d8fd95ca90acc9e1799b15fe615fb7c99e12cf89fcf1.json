{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sushm\\\\face_attendance_django\\\\face-attendance-frontend\\\\src\\\\components\\\\FaceAttendance.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function FaceAttendance() {\n  _s();\n  const videoRef = useRef(null);\n  const canvasRef = useRef(null);\n  const [message, setMessage] = useState(\"\");\n  const [msgType, setMsgType] = useState(\"\");\n\n  // ---------------------------\n  // START WEBCAM\n  // ---------------------------\n  useEffect(() => {\n    navigator.mediaDevices.getUserMedia({\n      video: true\n    }).then(stream => {\n      videoRef.current.srcObject = stream;\n    }).catch(err => {\n      console.error(\"Camera Error:\", err);\n    });\n  }, []);\n\n  // ---------------------------\n  // CAPTURE + SEND TO BACKEND\n  // ---------------------------\n  const captureImage = async () => {\n    const video = videoRef.current;\n    const canvas = canvasRef.current;\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\n    let imageData = canvas.toDataURL(\"image/jpeg\");\n    try {\n      const res = await fetch(\"http://127.0.0.1:8000/api/attendance/mark/face/\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          image: imageData\n        })\n      });\n      const data = await res.json();\n      if (data.error) {\n        setMsgType(\"error\");\n        setMessage(\"❌ \" + data.error);\n      } else {\n        setMsgType(\"success\");\n        setMessage(`✔ Attendance Marked for ${data.name}`);\n      }\n    } catch (err) {\n      setMsgType(\"error\");\n      setMessage(\"Server Error: \" + err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Face Recognition Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n      ref: videoRef,\n      autoPlay: true,\n      style: styles.video\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      style: {\n        display: \"none\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      style: styles.button,\n      onClick: captureImage,\n      children: \"Capture & Mark Attendance\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        ...styles.msgBox,\n        ...(msgType === \"success\" ? styles.success : styles.error)\n      },\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n}\n\n// ---------------------------\n// STYLES\n// ---------------------------\n_s(FaceAttendance, \"H9c7witoQtrYG4/TrZVC2af3DGI=\");\n_c = FaceAttendance;\nconst styles = {\n  container: {\n    textAlign: \"center\",\n    marginTop: \"30px\"\n  },\n  video: {\n    width: \"350px\",\n    height: \"260px\",\n    borderRadius: \"10px\",\n    border: \"2px solid #444\",\n    objectFit: \"cover\"\n  },\n  button: {\n    marginTop: \"15px\",\n    padding: \"12px 20px\",\n    fontSize: \"16px\",\n    cursor: \"pointer\",\n    background: \"#007bff\",\n    color: \"white\",\n    border: \"none\",\n    borderRadius: \"8px\"\n  },\n  msgBox: {\n    marginTop: \"20px\",\n    padding: \"15px\",\n    borderRadius: \"10px\",\n    width: \"350px\",\n    display: \"inline-block\",\n    fontSize: \"16px\"\n  },\n  success: {\n    background: \"#c8ffc8\",\n    border: \"2px solid #00b300\",\n    color: \"#006600\"\n  },\n  error: {\n    background: \"#ffd6d6\",\n    border: \"2px solid #ff4d4d\",\n    color: \"#b30000\"\n  }\n};\nvar _c;\n$RefreshReg$(_c, \"FaceAttendance\");","map":{"version":3,"names":["React","useRef","useState","useEffect","jsxDEV","_jsxDEV","FaceAttendance","_s","videoRef","canvasRef","message","setMessage","msgType","setMsgType","navigator","mediaDevices","getUserMedia","video","then","stream","current","srcObject","catch","err","console","error","captureImage","canvas","width","videoWidth","height","videoHeight","ctx","getContext","drawImage","imageData","toDataURL","res","fetch","method","headers","body","JSON","stringify","image","data","json","name","style","styles","container","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","autoPlay","display","button","onClick","msgBox","success","_c","textAlign","marginTop","borderRadius","border","objectFit","padding","fontSize","cursor","background","color","$RefreshReg$"],"sources":["C:/Users/sushm/face_attendance_django/face-attendance-frontend/src/components/FaceAttendance.js"],"sourcesContent":["import React, { useRef, useState, useEffect } from \"react\";\r\n\r\nexport default function FaceAttendance() {\r\n\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [message, setMessage] = useState(\"\");\r\n  const [msgType, setMsgType] = useState(\"\");\r\n\r\n  // ---------------------------\r\n  // START WEBCAM\r\n  // ---------------------------\r\n  useEffect(() => {\r\n    navigator.mediaDevices.getUserMedia({ video: true })\r\n      .then(stream => {\r\n        videoRef.current.srcObject = stream;\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Camera Error:\", err);\r\n      });\r\n  }, []);\r\n\r\n  // ---------------------------\r\n  // CAPTURE + SEND TO BACKEND\r\n  // ---------------------------\r\n  const captureImage = async () => {\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n\r\n    canvas.width = video.videoWidth;\r\n    canvas.height = video.videoHeight;\r\n\r\n    const ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n    let imageData = canvas.toDataURL(\"image/jpeg\");\r\n\r\n    try {\r\n      const res = await fetch(\"http://127.0.0.1:8000/api/attendance/mark/face/\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ image: imageData }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.error) {\r\n        setMsgType(\"error\");\r\n        setMessage(\"❌ \" + data.error);\r\n      } else {\r\n        setMsgType(\"success\");\r\n        setMessage(`✔ Attendance Marked for ${data.name}`);\r\n      }\r\n    } catch (err) {\r\n      setMsgType(\"error\");\r\n      setMessage(\"Server Error: \" + err.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={styles.container}>\r\n      <h2>Face Recognition Attendance</h2>\r\n\r\n      <video ref={videoRef} autoPlay style={styles.video} />\r\n\r\n      <canvas ref={canvasRef} style={{ display: \"none\" }} />\r\n\r\n      <button style={styles.button} onClick={captureImage}>\r\n        Capture & Mark Attendance\r\n      </button>\r\n\r\n      {message && (\r\n        <div\r\n          style={{\r\n            ...styles.msgBox,\r\n            ...(msgType === \"success\" ? styles.success : styles.error),\r\n          }}\r\n        >\r\n          {message}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// ---------------------------\r\n// STYLES\r\n// ---------------------------\r\nconst styles = {\r\n  container: {\r\n    textAlign: \"center\",\r\n    marginTop: \"30px\",\r\n  },\r\n  video: {\r\n    width: \"350px\",\r\n    height: \"260px\",\r\n    borderRadius: \"10px\",\r\n    border: \"2px solid #444\",\r\n    objectFit: \"cover\",\r\n  },\r\n  button: {\r\n    marginTop: \"15px\",\r\n    padding: \"12px 20px\",\r\n    fontSize: \"16px\",\r\n    cursor: \"pointer\",\r\n    background: \"#007bff\",\r\n    color: \"white\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n  },\r\n  msgBox: {\r\n    marginTop: \"20px\",\r\n    padding: \"15px\",\r\n    borderRadius: \"10px\",\r\n    width: \"350px\",\r\n    display: \"inline-block\",\r\n    fontSize: \"16px\",\r\n  },\r\n  success: {\r\n    background: \"#c8ffc8\",\r\n    border: \"2px solid #00b300\",\r\n    color: \"#006600\",\r\n  },\r\n  error: {\r\n    background: \"#ffd6d6\",\r\n    border: \"2px solid #ff4d4d\",\r\n    color: \"#b30000\",\r\n  },\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}